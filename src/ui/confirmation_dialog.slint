// ESPBrew URL Handler Confirmation Dialog
import { Button, VerticalBox, HorizontalBox, GroupBox, StandardListView } from "std-widgets.slint";

export component ConfirmationDialog inherits Window {
    title: "ESPBrew URL Handler";
    
    preferred-width: 500px;
    preferred-height: 400px;
    
    // Properties
    in property <string> action;
    in property <string> server;
    in property <bool> show-server;
    in property <string> board;
    in property <bool> show-board;
    in property <string> project;
    in property <bool> show-project;
    in property <string> additional-params;
    in property <bool> show-additional-params;
    
    // Callbacks
    callback confirm;
    callback cancel;
    
    background: #f5f5f5;
    
    VerticalBox {
        padding: 20px;
        spacing: 15px;
        
        // Header with icon and title
        HorizontalBox {
            spacing: 15px;
            
            // ESPBrew logo/icon placeholder
            Rectangle {
                width: 48px;
                height: 48px;
                background: #ff6b35;
                border-radius: 8px;
                
                Text {
                    text: "🍺";
                    font-size: 24px;
                    color: white;
                    horizontal-alignment: center;
                    vertical-alignment: center;
                }
            }
            
            VerticalBox {
                Text {
                    text: "ESPBrew URL Handler";
                    font-size: 18px;
                    font-weight: 700;
                    color: #333;
                }
                Text {
                    text: "A web link wants to perform an action using ESPBrew";
                    font-size: 12px;
                    color: #666;
                }
            }
        }
        
        // Action details
        GroupBox {
            title: "Action Details";
            
            VerticalBox {
                spacing: 10px;
                
                HorizontalBox {
                    Text {
                        text: "Action:";
                        font-weight: 600;
                        width: 80px;
                    }
                    Text {
                        text: action;
                        color: #007acc;
                        font-weight: 600;
                    }
                }
                
                if show-server : HorizontalBox {
                    Text {
                        text: "Server:";
                        font-weight: 600;
                        width: 80px;
                    }
                    Text {
                        text: server;
                        color: #333;
                    }
                }
                
                if show-board : HorizontalBox {
                    Text {
                        text: "Board:";
                        font-weight: 600;
                        width: 80px;
                    }
                    Text {
                        text: board;
                        color: #333;
                    }
                }
                
                if show-project : HorizontalBox {
                    Text {
                        text: "Project:";
                        font-weight: 600;
                        width: 80px;
                    }
                    Text {
                        text: project;
                        color: #333;
                        wrap: word-wrap;
                    }
                }
                
                if show-additional-params : VerticalBox {
                    spacing: 5px;
                    Text {
                        text: "Additional Parameters:";
                        font-weight: 600;
                    }
                    Text {
                        text: additional-params;
                        color: #666;
                        font-size: 11px;
                        wrap: word-wrap;
                    }
                }
            }
        }
        
        // Warning message
        Rectangle {
            background: #fff3cd;
            border-color: #ffeaa7;
            border-width: 1px;
            border-radius: 4px;
            
            HorizontalBox {
                padding: 10px;
                spacing: 10px;
                
                Text {
                    text: "⚠️";
                    font-size: 16px;
                }
                
                Text {
                    text: "This action will be performed using your local ESPBrew installation. Only continue if you trust this source.";
                    font-size: 12px;
                    color: #856404;
                    wrap: word-wrap;
                }
            }
        }
        
        // Buttons
        HorizontalBox {
            alignment: end;
            spacing: 10px;
            
            Button {
                text: "Cancel";
                preferred-width: 80px;
                clicked => {
                    cancel();
                }
            }
            
            Button {
                text: "Continue";
                preferred-width: 80px;
                clicked => {
                    confirm();
                }
            }
        }
    }
}

export component SuccessDialog inherits Window {
    title: "ESPBrew - Success";
    
    preferred-width: 400px;
    preferred-height: 250px;
    
    in property <string> message;
    in property <string> details;
    in property <bool> show-details;
    
    callback close;
    
    background: #f5f5f5;
    
    VerticalBox {
        padding: 20px;
        spacing: 15px;
        
        HorizontalBox {
            spacing: 15px;
            
            Text {
                text: "✅";
                font-size: 32px;
            }
            
            VerticalBox {
                Text {
                    text: "Success!";
                    font-size: 18px;
                    font-weight: 700;
                    color: #28a745;
                }
                Text {
                    text: message;
                    color: #333;
                    wrap: word-wrap;
                }
            }
        }
        
        if show-details : GroupBox {
            title: "Details";
            
            Text {
                text: details;
                color: #666;
                font-size: 12px;
                wrap: word-wrap;
            }
        }
        
        HorizontalBox {
            alignment: end;
            
            Button {
                text: "OK";
                preferred-width: 80px;
                clicked => {
                    close();
                }
            }
        }
    }
}

export component ErrorDialog inherits Window {
    title: "ESPBrew - Error";
    
    preferred-width: 400px;
    preferred-height: 300px;
    
    in property <string> title-text;
    in property <string> message;
    in property <string> details;
    in property <bool> show-details;
    
    callback close;
    
    background: #f5f5f5;
    
    VerticalBox {
        padding: 20px;
        spacing: 15px;
        
        HorizontalBox {
            spacing: 15px;
            
            Text {
                text: "❌";
                font-size: 32px;
            }
            
            VerticalBox {
                Text {
                    text: title-text;
                    font-size: 18px;
                    font-weight: 700;
                    color: #dc3545;
                }
                Text {
                    text: message;
                    color: #333;
                    wrap: word-wrap;
                }
            }
        }
        
        if show-details : GroupBox {
            title: "Error Details";
            
            Text {
                text: details;
                color: #666;
                font-size: 11px;
                wrap: word-wrap;
            }
        }
        
        HorizontalBox {
            alignment: end;
            
            Button {
                text: "OK";
                preferred-width: 80px;
                clicked => {
                    close();
                }
            }
        }
    }
}